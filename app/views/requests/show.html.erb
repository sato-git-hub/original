
<div class="swiper md:h-100">
  <div class="swiper-wrapper">
    <% if @request.request_images.attached? %>
      <% @request.request_images.each do |image| %>
      <div class="swiper-slide"><%= image_tag image, class: "bg-black w-full h-full object-contain select-none",
        draggable: false %></div>
      <% end %>
    <% else %>
    <div class="h-100 w-full flex items-center bg-gray-300 justify-center"><p>画像が読み込めませんでした</p></div>
    <% end %>
  </div>
  <div class="swiper-button-next"></div>
  <div class="swiper-button-prev"></div>
</div>

<p class="mb-4 font-bold text-xl md:text-2xl my-4 text-center"><%=@request.title%></p>
<% percentage = (@request.current_amount.to_f / @request.target_amount * 100) %>

<section class="bg-white rounded shadow-[0_4px_#e4e4e4] p-5 mb-4">
<p class="text-center font-bold">現在の支援総額</p>
<p class="text-center text-2xl font-bold"><%=@request.current_amount%>円</p>
<div class="flex md:text-sm text-xs justify-between">
  <p><%= percentage.round %>%</p>
  <p>
  <% if @request.deadline_at > Time.current %>
    <%= distance_of_time_in_words(Time.current, @request.deadline_at) %>
  <% else %>
    終了
  <% end %>
  </p>
</div>
<div class="w-52 h-4 bg-gray-200 rounded w-full">
  <div class="h-4 bg-green-400 rounded " style="width:<%= percentage.clamp(0,100).round(1) %>%"></div>
</div>
<div class="flex md:text-sm text-xs justify-between">
<p>現在の支援者数 <%=@request.support_histories.distinct.count(:user_id)%> 人</p>
<p>目標金額 <%=@request.target_amount%>円</p>
</div>
</section>


<div class="bg-[#f0f2f4] border border-[#d9dee5] mx-auto text-center max-w-300 rounded p-4 mb-4">
<h4 class="text-base text-orange font-bold">All-or-Nothing方式</h4>
<p>目標金額に達成しなかった場合、全額返金されます</p>
</div>

<div class="flex w-full">
<div class="bg-white p-4 mb-5 basis-2/3"><%=simple_format(@request.body)%></div>

</div>

</div>

<div class="creator-card">
  <%= link_to @request.creator, class: "creator-card-wrapper" do %>
    <div class="creator-image-area">
      <div class="creator-image-container">
        <%= image_tag @request.creator.creator_setting.images[0], class: "card-image", style: "--ratio: 2 / 1;" %>
        <% if @request.creator.creator_setting.published? %>
          <div class="card-tag-area">
            <div class="card-tag-container">
              <div class="tag">募集中</div>
            </div>
          </div>
        <% else %>
          <div class="card-tag-area">
            <div class="card-tag-container">
              <div class="tag" style="--bg_color: gray;">募集停止中</div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
    <div class="creator-body-area">
      <div class="avatar-container">
        <%= user_avatar(@request.creator, 60, class: "creator-avatar-image") %>
      </div>
      <div class="title creator-name">ddddddddddddddddddddddddddddddddddddddddddddddd</div>
    </div>
  <% end %>
</div>