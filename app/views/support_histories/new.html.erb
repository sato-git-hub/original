<h2 class="text-gray-700 text-2xl font-bold mb-2 text-center">決済確認画面</h2>


<h2 class="text-gray-700 text-xl font-bold mb-2"></h2>

  
    <div class="my-8 p-6 border border-gray-200 rounded-xl bg-gray-50 text-center">
      <p class="text-gray-600 font-medium">このリターンは配送を伴いません</p>
      <p class="text-sm text-gray-500 mt-1">リターンの配信方法については、リクエストが達成金額に到達時、クリエーターよりメール等で詳細が届きます</p>
    </div>

  <h2 class="text-gray-700 text-xl font-bold mb-2">決済方法</h2>

    <section class="max-w-fit mx-auto font-bold text-base pb-4">
      <% if current_user.payjp_customer_id.present? %>
        <label class="block mb-2 cursor-pointer">
          <input type="radio" name="payment_type" value="registered" checked data-action="change->card-select#toggle">
          登録済みのカード（**** **** **** <%= current_user.last4 || "----" %>）で決済する
        </label>
      <% end %>
    
      <label class="block cursor-pointer">
        <input type="radio" name="payment_type" value="new" data-action="change->card-select#toggle" <%= current_user.payjp_customer_id.present? ? "" : "checked" %>>
        新しいカード情報を入力する
      </label>
    </section>

    <hr class="my-8">
    
    <div data-card-select-target="registeredForm" class="<%= current_user.payjp_customer_id.present? ? "" : "hidden" %> text-center">
      <%= f.submit "登録済みのカードで支援を確定する", class: "bg-blue-600 text-white font-bold py-3 px-8 rounded-lg cursor-pointer"%>
    </div>

    <div data-card-select-target="newForm" class="<%= current_user.payjp_customer_id.blank? ? "" : "hidden" %> flex justify-center">
      <script
        src="https://checkout.pay.jp/"
        class="payjp-button"
        data-key="<%= ENV["PAYJP_PUBLIC_KEY"] %>"
        data-text="カード情報を入力する"
        data-submit-text="支援を確定する"
      ></script>
    </div>
  </div>
<% end %>
